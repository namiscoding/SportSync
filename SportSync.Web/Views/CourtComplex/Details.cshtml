@model SportSync.Business.Dtos.CourtComplexDetailDto

@{
    ViewData["Title"] = "Chi tiết khu phức hợp";
    var dateStr = ((DateOnly)ViewBag.SelectedDate).ToString("dd/MM/yyyy");
}

<style>
    .detail-page {
        --ss-blue: #0069ff;
        --ss-blue-light: #4da5ff;
        --ss-bg: #f6f9ff;
        --ss-yellow: #ffc107;
    }

        .detail-page .hero-wrap {
            position: relative;
            border-radius: 1rem;
            overflow: hidden;
            max-height: 300px;
        }

        .detail-page .hero-img {
            width: 100%;
            height: 300px;
            object-fit: cover;
            filter: brightness(.7);
        }

        .detail-page .hero-text {
            position: absolute;
            inset: 0;
            padding: 1.5rem;
            display: flex;
            flex-direction: column;
            justify-content: flex-end;
            color: #fff;
        }

        .detail-page .court-card {
            position: relative;
            overflow: hidden;
            border: none;
            border-radius: .75rem;
            transition: filter .25s, opacity .25s;
        }

            .detail-page .court-card:hover .court-inner,
            .detail-page .court-card:hover img {
                opacity: .25;
                filter: blur(2px);
            }

        .detail-page .book-btn {
            position: absolute;
            left: 50%;
            top: 50%;
            transform: translate(-50%,-50%) scale(.3);
            opacity: 0;
            padding: .6rem 2.8rem;
            background: linear-gradient(135deg,#ff9d00 0%,#ff4d00 100%);
            color: #fff;
            font-weight: 900;
            font-size: 1.05rem;
            z-index: 1000;
            box-shadow: 0 4px 12px rgb(255 77 0 /.28);
            border: none;
            transition: opacity .3s, transform .3s, box-shadow .3s;
        }

            .detail-page .book-btn:hover {
                transform: translate(-50%,-50%) scale(1);
                box-shadow: 0 14px 34px rgb(255 77 0 /.45);
            }

        .detail-page .badge-time {
            background: var(--ss-blue);
            color: #fff;
            font-size: .82rem;
        }

        .detail-page .badge-price {
            background: var(--ss-yellow);
            color: #000;
            font-size: .82rem;
        }

        .detail-page .slot-wrap {
            margin: .15rem .25rem .15rem 0;
        }

        .detail-page .court-list {
            max-height: 72vh;
            overflow: auto;
            padding-right: .5rem;
        }
</style>

<div class="detail-page">
    <a asp-controller="Court" asp-action="Index" class="back-btn mb-3">
        <i class="bi bi-arrow-left"></i> Quay lại
    </a>

    <h2 class="fw-bold">@Model.Name</h2>
    <p class="text-muted"><i class="bi bi-geo-alt"></i> @Model.Address</p>

    <div class="row">
        <div class="col-lg-7 court-list pe-lg-4">
            @if (!string.IsNullOrWhiteSpace(Model.Description))
            {
                <h4 class="fw-semibold mb-2">Giới thiệu</h4>
                <p>@Model.Description</p>
            }

            <h4 class="fw-semibold mt-4 mb-3">Danh sách sân (@dateStr)</h4>

            @foreach (var c in Model.Courts)
            {
                <div class="card shadow-sm mb-4 court-card">
                    <a class="book-btn"
                       asp-controller="Court" asp-action="Details"
                       asp-route-id="@c.CourtId"
                       asp-route-date="@(ViewBag.SelectedDate)">
                        Đặt sân
                    </a>
                    <div class="court-inner">
                        <div class="row g-0">
                            <div class="col">
                                <div class="card-body">
                                    <h5 class="card-title mb-1">
                                        @c.Name <small class="text-muted fst-italic">(@c.SportTypeName)</small>
                                    </h5>

                                    @if (!string.IsNullOrWhiteSpace(c.StatusByOwner))
                                    {
                                        <div class="text-muted">Trạng thái: @c.StatusByOwner</div>
                                    }

                                    <h6 class="mt-3">Khung giờ mở cửa và đóng cửa</h6>
                                    @foreach (var hr in c.HourlyPriceRates)
                                    {
                                        <div>
                                            <span class="badge badge-time slot-wrap">
                                                @($"{hr.Start:hh\\:mm} - {hr.End:hh\\:mm}")
                                            </span>
                                        </div>
                                    }
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            }
        </div>

        <div class="col-lg-5 sticky-top" style="top:80px;">
            <h4 class="fw-semibold mb-3">Tiện nghi</h4>
            <ul class="list-group shadow-sm">
                @foreach (var amenity in Model.Amenities)
                {
                    <li class="list-group-item">
                        <i class="bi bi-check-circle me-2 text-success"></i>@amenity.Name
                    </li>
                }
            </ul>

            <h4 class="fw-semibold mt-4 mb-3">Thông tin liên hệ</h4>
            <ul class="list-group shadow-sm">
                @if (!string.IsNullOrWhiteSpace(Model.ContactPhoneNumber))
                {
                    <li class="list-group-item">
                        <i class="bi bi-telephone me-2 text-primary"></i>@Model.ContactPhoneNumber
                    </li>
                }
                @if (!string.IsNullOrWhiteSpace(Model.ContactEmail))
                {
                    <li class="list-group-item">
                        <i class="bi bi-envelope me-2 text-primary"></i>@Model.ContactEmail
                    </li>
                }
            </ul>
        </div>
    </div>
</div><!-- /detail-page -->
